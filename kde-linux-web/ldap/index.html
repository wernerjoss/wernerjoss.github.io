<!DOCTYPE html>
<html lang="">
	<head>
			<meta charset="utf-8" />
		<title>LDAP | Hoernerfranzracing</title>

		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" type="image/png" href="/user/themes/myvela/images/favicon.ico" />   		<meta name="generator" content="GravCMS" />
<meta name="description" content="Motorradsport unter Freunden" />

		<link rel="canonical" href="./kde-linux-web/ldap" />
				<link rel="preload" href=/werner/user/themes/myvela/fonts/fontawesome-webfont.woff2?v=4.7.0  as="font" crossorigin="">
		<link rel="preload" href=/werner/user/themes/myvela/fonts/roboto-v20-latin-300.woff2  as="font" crossorigin="">
		<link rel="preload" href=/werner/user/themes/myvela/fonts/roboto-v20-latin-300italic.woff2  as="font" crossorigin="">
		<link rel="preload" href=/werner/user/themes/myvela/fonts/roboto-v20-latin-regular.woff2  as="font" crossorigin="">
		<link rel="preload" href=/werner/user/themes/myvela/fonts/roboto-v20-latin-italic.woff2  as="font" crossorigin="">
		<link rel="preload" href=/werner/user/themes/myvela/fonts/roboto-v20-latin-500.woff2  as="font" crossorigin="">
		<link rel="preload" href=/werner/user/themes/myvela/fonts/roboto-v20-latin-500italic.woff2  as="font" crossorigin="">
		<link rel="preload" href=/werner/user/themes/myvela/fonts/roboto-v20-latin-700.woff2  as="font" crossorigin="">
		<link rel="preload" href=/werner/user/themes/myvela/fonts/roboto-v20-latin-700italic.woff2  as="font" crossorigin="">

																						 			 		
																
							<link href="/assets/d6502bb3b9720afeb16e07f83ef1b182.css" type="text/css" rel="stylesheet">

			<script src="/werner/assets/a9e5ab09eff08c476502ecc0633daeb2.js"></script>
<script>
window.addEventListener("load", function() {

	var pluginConfig = {"enabled":true,"custom":false,"position":"bottom-right","compliance":"info","palette":"gray","layout":"classic","informations":"\/werner\/impressum\/datenschutz","banner_message":"Wir setzen nur technisch notwendige Cookies - diese k\u00f6nnen nicht abgelehnt werden","banner_dismiss":"Ok","banner_accept":"","banner_policy":""};
	var cookieconsentInitialse = {
		"position": pluginConfig.position,
		"theme": pluginConfig.layout,
		"type": pluginConfig.compliance,

		"content": createCookieContent(pluginConfig),
		"palette": createCookiePalette(pluginConfig.palette)
	}

		if (pluginConfig.custom)
	{
		var customInitialise = JSON.parse(
			pluginConfig.custom_config.replace(/\r?\n|\r/g,'')
		);
		cookieconsentInitialse = Object.assign({}, cookieconsentInitialse, customInitialise);
	}

		window.cookieconsent.initialise(cookieconsentInitialse);
});

function createCookiePalette(configPalette)
{
	var palette = {
		"popup": {},
		"button": {}
	};

	if (configPalette === "black")
	{
		palette.popup.background = "#000";
		palette.button.background = "#f1d600";
	}

	if (configPalette === "white")
	{
		palette.popup.background = "#eaf7f7";
		palette.popup.text = "#5c7291";

		palette.button.background = "#56cbdb";
		palette.button.text = "#ffffff";
	}

	if (configPalette === "gray")
	{
		palette.popup.background = "#252e39";
		palette.button.background = "#14a7d0";
	}

	return palette;
}

function createCookieContent(config)
{
	var cookieContent = {};

	cookieContent.message = "Diese Webseite verwendet Cookies, um Ihnen einen besseren Service bieten zu können. Durch die weitere Nutzung der Seite stimmen Sie der Verwendung zu.";
	if (config.banner_message)
	{
		cookieContent.message = config.banner_message;
	}

	cookieContent.dismiss = "OK";
	if (config.banner_dismiss)
	{
		cookieContent.dismiss = config.banner_dismiss;
	}

	cookieContent.deny = "PLUGINS.SIMPLE_COOKIE.BANNER_DENY";
	if (config.banner_deny)
	{
		cookieContent.deny = config.banner_deny;
	}


	cookieContent.allow = "Weitere Informationen";
	if (config.banner_accept)
	{
		cookieContent.allow = config.banner_accept;
	}

	cookieContent.link = "Weitere Informationen";
	if (config.banner_policy)
	{
		cookieContent.link = config.banner_policy;
	}

	cookieContent.href = "https://cookiesandyou.com";
	if (config.informations)
	{
		cookieContent.href = config.informations;
	}

	return cookieContent;
}
</script>
<script>
$(document).ready(function(){
    $('a[rel="lightbox"]').featherlight({
        openSpeed: 250,
        closeSpeed: 250,
        closeOnClick: 'background',
        closeOnEsc: '1',
        root: 'body',
        afterContent: function() {
            var caption = this.$currentTarget.find('img').attr('alt');
            this.$instance.find('.caption').remove();
            $('<div class="caption">').text(caption).appendTo(this.$instance.find('.featherlight-content'));
        }
    });
});
</script>

		
		<style>
            .notices.yellow p::after {
        content: "";
        } 
        .notices.red p::after {
        content: "";
        }
        .notices.blue p::after {
        content: "";
        }
        .notices.green p::after {
        content: "";
        } 
                @media screen and (min-width: 1200px) {
            .slideout-panel {
            margin-left: 320px;
            }

            .slideout-menu {
            display: block;
            }

            .toggle-button {
            visibility: hidden;
            }
            .page-title{ 
                margin-top: 35px;
            }
        }
    </style>		</head>
	<body>
					<div class="main-nav" id="menu">
			  <div class="flex-container">
    <a href="/" class="sidebar-brand">
              <img
          src="/werner/user/themes/myvela/images/logo.png"
          style="object-fit: contain;
                          height:165px;
                                      max-width: 100%;
                        "
          alt="">
            
    </a>
    <div style="padding-left: 15px;margin-bottom: 0.25em;">      <h4>Hoernerfranzracing</h4>
    <h6>Motorradsport unter Freunden</h6></div>
</div>

<nav class="sidebar-nav">
<ul class="metismenu"  id="metismenu">
                                                            <li>
                <a href="/about" class="  webkitNoSelect" aria-expanded="false">
                    About
                </a>
            </li>
                                                                <li>
                <a href="/allgemein" class="  webkitNoSelect" aria-expanded="false">
                    Allgemeine Informationen
                </a>
            </li>
                                                                <li>
                <a href="/links" class="  webkitNoSelect" aria-expanded="false">
                    Links
                </a>
            </li>
                                                                <li class="mm-active">
                <a href="/kde-linux-web" class="mm-active  has-arrow webkitNoSelect" aria-expanded=&quot;true&quot;>
                    EDV / Linux /Web
                </a>
                <ul class="mm-show">
                                                                            <li class="">
                <a href="/kde-linux-web/tips-and-tricks" class="  has-arrow webkitNoSelect" aria-expanded=&quot;false&quot;>
                    Tips &amp; Tricks
                </a>
                <ul class="">
                                                                            <li>
                <a href="/kde-linux-web/tips-and-tricks/dokumente-in-der-cloud" class="  webkitNoSelect" aria-expanded="false">
                    Dokumente in der Cloud
                </a>
            </li>
                                                                <li>
                <a href="/kde-linux-web/tips-and-tricks/web-development-with-grav-cms" class="  webkitNoSelect" aria-expanded="false">
                    Web Development with GRAV Cms
                </a>
            </li>
                                                                <li>
                <a href="/kde-linux-web/tips-and-tricks/docker-grav-xdebug" class="  webkitNoSelect" aria-expanded="false">
                    Docker Grav Xdebug
                </a>
            </li>
                                                                <li>
                <a href="/kde-linux-web/tips-and-tricks/vpn" class="  webkitNoSelect" aria-expanded="false">
                    VPN
                </a>
            </li>
            
                </ul>
            </li>
                                                                <li>
                <a href="/kde-linux-web/kde-blog" class="  webkitNoSelect" aria-expanded="false">
                    EDV Archiv
                </a>
            </li>
                                                                <li>
                <a href="/kde-linux-web/wp-ics-importer" class="  webkitNoSelect" aria-expanded="false">
                    WP-ICS Importer
                </a>
            </li>
                                                                <li>
                <a href="/kde-linux-web/wp-caldav2ics" class="  webkitNoSelect" aria-expanded="false">
                    WP-CalDav2ICS
                </a>
            </li>
                                                                <li>
                <a href="/kde-linux-web/spam" class="  webkitNoSelect" aria-expanded="false">
                    SPAM
                </a>
            </li>
                                                                <li>
                <a href="/kde-linux-web/gubed" class="  webkitNoSelect" aria-expanded="false">
                    Gubed
                </a>
            </li>
                                                                <li>
                <a href="/kde-linux-web/ldap" class="mm-active active-page webkitNoSelect" aria-expanded="false">
                    LDAP
                </a>
            </li>
                                                                <li>
                <a href="/kde-linux-web/email-encryption" class="  webkitNoSelect" aria-expanded="false">
                    Email Encryption
                </a>
            </li>
            
                </ul>
            </li>
                                                                <li>
                <a href="/kalender" class="  webkitNoSelect" aria-expanded="false">
                    Kalender
                </a>
            </li>
                                                                <li>
                <a href="/forum" class="  webkitNoSelect" aria-expanded="false">
                    Forum
                </a>
            </li>
                                                                <li>
                <a href="/impressum" class="  webkitNoSelect" aria-expanded="false">
                    Impressum
                </a>
            </li>
                                                                <li>
                <a href="/archiv" class="  webkitNoSelect" aria-expanded="false">
                    Blog-Archiv
                </a>
            </li>
            
</ul>
</nav>
<div style="padding-left: 15px;margin-top: 0.1em;">
  <div class="search-wrapper">
    <form name="search" data-simplesearch-form>
        <input
            name="searchfield"
            class="search-input"
            aria-label="search"
            type="text"
             data-min="3"             required
            placeholder="Suche …"
            value=""
            data-search-invalid="Bitte geben Sie mindestens 3 Zeichen ein"
            data-search-separator=":"
            data-search-input="/werner/search/query"
        />
            </form>
</div>
</div>
<div style="padding-left: 15px;margin-top: 0.4em;">
        <a class="button" href="/blog.rss"><i class="fa fa-rss-square"></i> RSS</a>
</div>

		</div>
			
			<main id="panel" class="slideout-panel">
			  <div class="toggle-button hamburger hamburger--spin">
    <div class="hamburger-box">
        <div class="hamburger-inner"></div>
    </div>
  </div>
  <article class="post-2 page type-page status-publish hentry">
    <header class="entry-header">
            </header>
    <div class="entry-content">
     <h2>setting up an LDAP-server for use with kaddressbook</h2>
<p>This is a summary of my experience in setting up a local LDAP-server for
managing/sharing address data in my tiny home-lan - so don't expect too much here,
I'm not an expert in LDAP, things mentioned here may be incomplete or even
wrong - I write this mainly as a reference for myself.</p>
<p>First, I will list the software/versions which I ended up to use for the given task,
all the following descriptions are only tested with this environment, and may not work at all
with other packages/versions.</p>
<ul>
   <li><a href="http://www.openldap.org" target="_blank" rel="nofollow noopener noreferrer" class="external-link no-image">OpenLdap 2.1.29</a></li>
   <li><a href="http://phpldapadmin.sf.net" target="_blank" rel="nofollow noopener noreferrer" class="external-link no-image">phpLDAPadmin 0.9.3</a></li>
   <li><a href="http://www.kde.org" target="_blank" rel="nofollow noopener noreferrer" class="external-link no-image">kde 3.2.1</a></li>
</ul>
<p>As a first start, I followed the instructions in the <a href="http://www.openldap.org/doc/admin22/quickindex.html" target="_blank" rel="nofollow noopener noreferrer" class="external-link no-image">openldap quickstart guide</a> to get a basic setup for the server.<br>
This turned out to work with the given example, but failed to import ldif files exported from
kaddressbook - I got all kind of errors, regardless what I tried <img src="./wp-content/uploads/symbole/emoticons/sad.png">.<br>
Finally, I found out that these were mostly related to not having included several schemas
into my slapd.conf file - namely the following:</p>
<pre>
include         /usr/local/etc/openldap/schema/core.schema
include         /usr/local/etc/openldap/schema/cosine.schema
include         /usr/local/etc/openldap/schema/inetorgperson.schema
include         /usr/local/etc/openldap/schema/openldap.schema
</pre>
<p>Another hint is to NOT have any spaces,tabs or whatsoever at the beginning and end of each line in ldif-files - ldapadd is VERY picky about this !<br>
During these investigations, I also tried some GUI frontends to manage LDAP-servers,
namely directoryadministrator, ldapexplorer etc., which would partly work,
but ended up using phpldapadmin (see link above) which turned out to be by far the
best of all I tried - so I can strongly recommend it.<br>
Once a basic server installation is completed, you can do all common tasks such
as add/delete/modify entries, import/export ldif data and so on from phpldapadmin -
really easy.<br>
Now, let's take a look at the goal of this project and figure out how to achieve this:</p>
<ol>
   <li>populate the server's database with entries currently stored in local ~./kde/share/apps/kabc/std.vcf</li>
   <li>merge with other user's address data</li>
   <li>adapt user permissions, so that each user can modify/delete his own entries,
   but only read those created by others</li>
   <li>connect kaddressbook to the LDAP server</li>
   <li>evtl. try to add/modify/delete entries on server via kaddressbook</li>
</ol>
<p>As for 1., I exported my addressbook to an ldif file and tried to import this into my LDAP server.
However, this didn't work without modifications:<br>
First, I had to realize, that the 'dn: ..' line had to be accomplished by my
base definition, e.g.</p>
<pre>
dn: cn=Mustermann, Hans
</pre>
<p>had to be replaced by:</p>
<pre>
dn: cn=Mustermann Hans,dc=mydomain,dc=com
</pre>
<p>Also note, the comma ',' after the Name in the exportfile, was not accepted by ldapadd, so it had to be removed.
Another hint is to remove any 'mail=xxx' entry from the 'dn: ..' line,
which are present in each export record that has a 'mail:' attribute.
Then, there are attributes in the ldif export, for which any value is just rejected,
these are uid+modifytimestamp - I just filtered them out using 'grep -v ...'.
Other attributes which are not accepted may be replaced by equivalents,
a list is as follows:</p>
<table border>
  <tbody>
    <tr>
      <th>export</th>
      <th>import</th>
    </tr>
    <tr>
    <td>cellphone</td>
    <td>mobile</td>
    </tr>
    <tr>
    <td>streethomeaddress</td>
    <td>postalAddress</td>
    </tr>
    <tr>
    <td>streetaddress</td>
    <td>street</td>
    </tr>
    <tr>
    <td>mozillahomelocalityname</td>
    <td>l</td>
    </tr>
    
    <tr>
    <td>mozillahomepostalcode</td>
    <td>postalcode</td>
    </tr>
    <tr>
    <td>homepostalcode</td>
    <td>postalcode</td>
    </tr>
    <tr>
    <td>workurl</td>
    <td>labeledURI</td>
    </tr>
  </tbody>
</table>
<p>In addition, each entry with a 'mail:' attribute had to be accomplished by a line:</p>
<pre>objectclass: inetOrgPerson</pre>     </div>

                 
  </article>
										<a href="javascript:" id="return-to-top">

<i class="fa fas fa-chevron-up"></i>
</a>
					</main>
	
		
			<script src="/werner/assets/3c211ab80e5b4172dfc6a545e993b4fe.js"></script>
 		</body>
</html>
